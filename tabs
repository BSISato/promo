CREATE TABLE IF NOT EXISTS `empresa` (
    `idEmpresa` INTEGER NOT NULL auto_increment , 
    `razaoSocial` VARCHAR(255), 
    `nomeFantasia` VARCHAR(255), 
    `cnpj` VARCHAR(255), 
    `responsavel` VARCHAR(255), 
    `createdAt` DATETIME NOT NULL, 
    `updatedAt` DATETIME NOT NULL, 
    PRIMARY KEY (`idEmpresa`)
    ) ENGINE=InnoDB;

CREATE TABLE IF NOT EXISTS `usuario` (
    `idUsuario` INTEGER NOT NULL auto_increment , 
    `nome` VARCHAR(255), 
    `senha` VARCHAR(255), 
    `nivel` VARCHAR(255), 
    `idEmpresa` INTEGER,
    `createdAt` DATETIME NOT NULL, 
    `updatedAt` DATETIME NOT NULL, 
    PRIMARY KEY (`idUsuario`),
    CONSTRAINT fk_usuario_empresa FOREIGN KEY (idEmpresa) REFERENCES empresa (idEmpresa)
    ) ENGINE=InnoDB;

CREATE TABLE IF NOT EXISTS `segmento` (
    `idSegmento` INTEGER NOT NULL auto_increment , 
    `descricao` VARCHAR(255),  
    `createdAt` DATETIME NOT NULL, 
    `updatedAt` DATETIME NOT NULL, 
    PRIMARY KEY (`idSegmento`)
    ) ENGINE=InnoDB;

CREATE TABLE IF NOT EXISTS `empresaSegmento` (
    `idEmpresa` INTEGER NOT NULL,
    `idSegmento` INTEGER NOT NULL,  
    `createdAt` DATETIME NOT NULL, 
    `updatedAt` DATETIME NOT NULL, 
    PRIMARY KEY (`idEmpresa`,`idSegmento`)
    ) ENGINE=InnoDB;

CREATE TABLE IF NOT EXISTS `produto` (
    `idProduto` INTEGER NOT NULL auto_increment , 
    `descricao` VARCHAR(255), 
    `qtde` INTEGER, 
    `idSegmento` INTEGER, 
    `idEmpresa` INTEGER, 
    `createdAt` DATETIME NOT NULL, 
    `updatedAt` DATETIME NOT NULL, PRIMARY KEY (`idProduto`),
    CONSTRAINT fk_produto_segmento FOREIGN KEY (idSegmento) REFERENCES segmento (idSegmento),
    CONSTRAINT fk_produto_empresa FOREIGN KEY (idEmpresa) REFERENCES empresa (idEmpresa)
    ) ENGINE=InnoDB;

CREATE TABLE IF NOT EXISTS `promocao` (
    `idPromocao` INTEGER NOT NULL auto_increment , 
    `valor` FLOAT, 
    `validade` DATETIME, 
    `idProduto` INTEGER,
    `utilizado` VARCHAR(255),
    `createdAt` DATETIME NOT NULL, 
    `updatedAt` DATETIME NOT NULL, 
    PRIMARY KEY (`idPromocao`),
    CONSTRAINT fk_promocao_produto FOREIGN KEY (idProduto) REFERENCES produto (idProduto),
    CONSTRAINT fk_promocao_empresa FOREIGN KEY (idEmpresa) REFERENCES empresa (idEmpresa)
    ) ENGINE=InnoDB;